# android-movie-ticket

# 기능 목록

- [x] 영화는 `제목, 이미지 URL, 상영 시작일, 상영 종료일, 러닝타임`의 정보를 갖는다
- [x] 총 영화 티켓 가격을 계산한다
- [x] 영화 티켓 한 장은 13,000원이다
- [x] 영화 일정
    - [x] 상영 가능 날짜 반환한다
    - [x] 영화 상영 시간 범위는 오전 9시부터 자정까지다
    - [x] 주말에는 오전 9시부터 두 시간 간격으로 상영한다
    - [x] 평일에는 오전 10시부터 두 시간 간격으로 상영한다
    - [x] 현재 시간을 기준으로 상영 가능한 가장 빠른 시간을 반환한다
-[x] 영화 예매
    - [x] 영화 예매는 티켓을 초기화 한다
    - [x] 영화 예매는 티켓이 있는지 확인한다
    - [x] 영화 예매는 티켓을 추가한다
    - [x] 영화 예매는 티켓을 제거한다
    - [x] 영화 예매는 총 가격을 반환한다
    - [x] 영화 예매는 예매 시간을 변경한다
- [x] 티켓
    - [x] 티켓은 본인의 가격을 반환한다
    - [x] 티켓은 좌석 위치를 반환한다
- [x] 티켓들
    - [x] 티켓들은 티켓들의 좌석 위치를 반환한다
    - [x] 티켓들이 비어있는지 반환한다
    - [x] 티켓을 추가한다
    - [x] 티켓을 제거한다
    - [x] 티켓들의 총합을 반환한다

### 영화 목

- [x] 영화 `제목, 이미지, 상영일, 러닝타임`을 표시한다

### 영화 목록 화면

- [x] 영화 목록을 볼 수 있다
- [x] `지금 예매 버튼`을 누르면 `영화 예매 화면`으로 전환된다

### 영화 예매 화면

- [x] 날짜와 시간을 정할 수 있다
- [x] 인원을 정할 수 있다
- [x] 화면이 회전되어도 입력한 정보는 유지 된다
- [x] 예매 완료를 확인하는 다이얼로그가 표시된다
    - [x] 다이얼로그는 배경을 터치해도 사라지지 않아야 한다
    - [x] 다이얼로그에서 예매 완료를 선택하면 예매 내역 화면으로 이동한다
- [x] 날짜와 시간은 기본값으로 초기화되어있다

### 영화 예매 내역 화면

- [x] 영화 제목과 상영일을 표시한다
- [x] `영화 예매 내역 화면`에서 뒤로 가기 버튼을 누르면 `영화 목록 화면`으로 전환된다

### 1차 피드백 반영

- [x] Test에 Fixture 관심사 분리
- [x] 테스트 -> 해야 한다로 테스트 네이밍 수정
- [x] 안드로이드 테스트 함수 네이밍 수정
- [x] 화면 회전간에 데이터가 유지가 되고 그것이 표시가 되어야 한다.(테스트 tip: UI에서 어떠한 상태에서 어떻게 표시가 되는지)
- [x] 테스트 분리
- [x] lateinit 위험 사항 학습 후 사용 기준을 정해서 사용
- [x] onCreate 함수안에 기능 분리
- [x] !! 사용 수정
- [x] string resource 학습 후 사용 기준을 정하고 사용
- [x] 라이프 사이클에서 onStart와 onResume의 기준 정리
- [x] 분기처리에서 Parcelable 중복 처리
- [x] onOptionsItemSelected 학습후에 개선 할지 여부 판단
- [x] Dialog 전역 생성 및 title을 동적으로 수정
- [x] 받는 곳에서 key값을 보유하고 보내는 곳에서 Key 값을 받도록 수정
- [x] DateScheduler에 관한 고민
- [x] Reservation에 ticketCount에 관한 고민
- [x] ticketPrice를 열거형 객체로 변경
- [x] ConstraintLayout 학습 및 위치 관계 및 크기 정의 수정
- [x] 입장 가능 시간 비즈니스 로직으로 분리

### 2차 피드백 반영

- [x] dialog 정보를 통해서 dialog를 관리하고 보여주는 기능으로 수정
- [x] onRestoreInstanceState에서 onSaveInstanceState를 호출해도 실행되는 이유 분석
- [x] view를 초기화해서 반환하는 기능으로 변환
- [x] ViewHolder 접근 제어자 추가
- [x] 싱글톤과 확장함수 테스트 구현 전략에 따른 구별 학습
- [x] domain 및 ui 패키지 분리
- [x] TicketType을 가지는 Ticket 구현
- [x] deprecated된 코드 수정
- [x] key 동반 객체의 중복 방지 고민
- [x] 불변 객체에 getter 수정

### 3차 피드백 반영

- [x] TicketType은 상태만 명시하도록 수정하고 계산은 다른 로직
- [x] key 값 컨벤션 통일
- [x] selectedItem nullable 확인
- [x] isDateInit boolean flag 제외하고 처리 및 Martin Fowler - Refactoring에서 boolean flag 단점 학습

### 4차 피드백 반영

- [x] Lamda 로직 presenter에서 함수를 통해서 사용하도록 수정
- [ ] relaxed = true 는 어떠한 역할을 할까요?
- [ ] 3개마다 1개씩 광고가 들어가져 있는 것이라는 비즈니스 로직 추출
- [ ] Presenter 관련 Test 수정
